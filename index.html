<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>THE PATH // A Life in Choices</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="style.css">
</head>
<body class="text-gray-200 overflow-hidden">

    <div id="particles" class="fixed inset-0 pointer-events-none overflow-hidden"></div>

    <!-- Housing Modal -->
    <div id="housingModal" class="fixed inset-0 bg-black/80 z-50 flex items-center justify-center hidden">
        <div class="bg-gray-900 border border-gray-700 rounded-lg p-4 max-w-md w-full mx-4 max-h-[80vh] overflow-y-auto">
            <div class="flex justify-between items-center mb-4">
                <h3 class="text-lg font-bold text-white">üè† Change Living Situation</h3>
                <button onclick="closeHousingModal()" class="text-gray-400 hover:text-white text-xl">&times;</button>
            </div>
            <div id="housingOptions" class="space-y-2"></div>
        </div>
    </div>

    <!-- Transport Modal -->
    <div id="transportModal" class="fixed inset-0 bg-black/80 z-50 flex items-center justify-center hidden">
        <div class="bg-gray-900 border border-gray-700 rounded-lg p-4 max-w-md w-full mx-4 max-h-[80vh] overflow-y-auto">
            <div class="flex justify-between items-center mb-4">
                <h3 class="text-lg font-bold text-white">üöó Change Transportation</h3>
                <button onclick="closeTransportModal()" class="text-gray-400 hover:text-white text-xl">&times;</button>
            </div>
            <div id="transportOptions" class="space-y-2"></div>
        </div>
    </div>

    <!-- Tutorial Modal -->
    <div id="tutorialModal" class="fixed inset-0 bg-black/90 z-50 flex items-center justify-center hidden">
        <div class="bg-gray-900 border border-cyan-500 rounded-lg p-6 max-w-xl w-full mx-4 max-h-[90vh] overflow-y-auto">
            <div class="text-center mb-4">
                <div class="text-4xl mb-2" id="tutorialIcon">üìñ</div>
                <h3 class="text-xl font-bold text-white" id="tutorialTitle">Welcome to Life Game!</h3>
            </div>
            <div id="tutorialContent" class="text-gray-300 mb-6 space-y-3"></div>
            <div class="flex justify-between items-center">
                <span class="text-sm text-gray-500" id="tutorialProgress">Step 1 of 5</span>
                <div class="flex gap-2">
                    <button onclick="skipTutorial()" class="px-4 py-2 bg-gray-700 hover:bg-gray-600 text-gray-300 rounded transition-colors">
                        Skip Tutorial
                    </button>
                    <button onclick="nextTutorialStep()" class="px-6 py-2 bg-cyan-600 hover:bg-cyan-500 text-white rounded transition-colors" id="tutorialNextBtn">
                        Next ‚Üí
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Game Menu Modal -->
    <div id="gameMenuModal" class="fixed inset-0 bg-black/80 z-50 flex items-center justify-center hidden">
        <div class="bg-gray-900 border border-gray-700 rounded-lg p-6 max-w-sm w-full mx-4">
            <h3 class="text-xl font-bold text-white text-center mb-6">‚öôÔ∏è Game Menu</h3>
            <div class="space-y-3">
                <button onclick="saveGame()" class="w-full py-3 bg-green-600 hover:bg-green-500 text-white rounded-lg transition-colors flex items-center justify-center gap-2">
                    üíæ Save Game
                </button>
                <button onclick="loadGame()" class="w-full py-3 bg-blue-600 hover:bg-blue-500 text-white rounded-lg transition-colors flex items-center justify-center gap-2">
                    üìÇ Load Game
                </button>
                <button onclick="showTutorial()" class="w-full py-3 bg-cyan-600 hover:bg-cyan-500 text-white rounded-lg transition-colors flex items-center justify-center gap-2">
                    üìñ View Tutorial
                </button>
                <button onclick="confirmEndGame()" class="w-full py-3 bg-red-600 hover:bg-red-500 text-white rounded-lg transition-colors flex items-center justify-center gap-2">
                    üèÅ End Game Early
                </button>
                <button onclick="closeGameMenu()" class="w-full py-3 bg-gray-700 hover:bg-gray-600 text-gray-300 rounded-lg transition-colors">
                    Cancel
                </button>
            </div>
        </div>
    </div>

    <!-- Confirm End Game Modal -->
    <div id="confirmEndModal" class="fixed inset-0 bg-black/80 z-50 flex items-center justify-center hidden">
        <div class="bg-gray-900 border border-red-500 rounded-lg p-6 max-w-sm w-full mx-4 text-center">
            <div class="text-4xl mb-4">‚ö†Ô∏è</div>
            <h3 class="text-xl font-bold text-white mb-2">End Game Early?</h3>
            <p class="text-gray-400 mb-6">Your life story will be assessed based on your current progress. This cannot be undone.</p>
            <div class="flex gap-3">
                <button onclick="closeConfirmEnd()" class="flex-1 py-2 bg-gray-700 hover:bg-gray-600 text-white rounded transition-colors">
                    Keep Playing
                </button>
                <button onclick="endGameEarly()" class="flex-1 py-2 bg-red-600 hover:bg-red-500 text-white rounded transition-colors">
                    End Game
                </button>
            </div>
        </div>
    </div>

    <!-- Employment Modal -->
    <div id="employmentModal" class="fixed inset-0 bg-black/80 z-50 flex items-center justify-center hidden">
        <div class="bg-gray-900 border border-gray-700 rounded-lg p-4 max-w-md w-full mx-4 max-h-[90vh] overflow-y-auto">
            <div class="flex justify-between items-center mb-4">
                <h3 class="text-lg font-bold text-white">üíº Employment</h3>
                <button onclick="closeEmploymentModal()" class="text-gray-400 hover:text-white text-xl">&times;</button>
            </div>
            <div id="employmentContent" class="space-y-4"></div>
            <div id="employmentActions" class="mt-4 space-y-2"></div>
        </div>
    </div>

    <!-- Education/Status Modal -->
    <div id="educationModal" class="fixed inset-0 bg-black/80 z-50 flex items-center justify-center hidden">
        <div class="bg-gray-900 border border-gray-700 rounded-lg p-4 max-w-md w-full mx-4 max-h-[90vh] overflow-y-auto">
            <div class="flex justify-between items-center mb-4">
                <h3 class="text-lg font-bold text-white" id="eduModalTitle">üìö Academic Progress</h3>
                <button onclick="closeEducationModal()" class="text-gray-400 hover:text-white text-xl">&times;</button>
            </div>
            <div id="educationContent" class="space-y-4"></div>
            <div class="mt-4">
                <button onclick="closeEducationModal()" class="w-full bg-gray-700 hover:bg-gray-600 text-white py-2 px-4 rounded transition-colors">
                    Close
                </button>
            </div>
        </div>
    </div>

    <!-- Partner Details Modal -->
    <div id="partnerModal" class="fixed inset-0 bg-black/80 z-50 flex items-center justify-center hidden">
        <div class="bg-gray-900 border border-pink-500/30 rounded-lg p-4 max-w-md w-full mx-4 max-h-[90vh] overflow-y-auto">
            <div class="flex justify-between items-center mb-4">
                <h3 class="text-lg font-bold text-white">üíï Your Relationship</h3>
                <button onclick="closePartnerModal()" class="text-gray-400 hover:text-white text-xl">&times;</button>
            </div>
            <div id="partnerDetails" class="space-y-3"></div>
            <div class="mt-4">
                <button onclick="closePartnerModal()" class="w-full bg-gray-700 hover:bg-gray-600 text-white py-2 px-4 rounded transition-colors">
                    Close
                </button>
            </div>
        </div>
    </div>

    <!-- Credit/Budget Modal -->
    <div id="creditModal" class="fixed inset-0 bg-black/80 z-50 flex items-center justify-center hidden">
        <div class="bg-gray-900 border border-green-500/30 rounded-lg p-4 max-w-lg w-full mx-4 max-h-[90vh] overflow-y-auto">
            <div class="flex justify-between items-center mb-4">
                <h3 class="text-lg font-bold text-white">üí≥ Financial Management</h3>
                <button onclick="closeCreditModal()" class="text-gray-400 hover:text-white text-xl">&times;</button>
            </div>
            <div id="creditContent" class="space-y-3"></div>
            <div class="mt-4">
                <button onclick="closeCreditModal()" class="w-full bg-gray-700 hover:bg-gray-600 text-white py-2 px-4 rounded transition-colors">
                    Close
                </button>
            </div>
        </div>
    </div>

    <!-- Relationships Modal -->
    <div id="relationshipsModal" class="fixed inset-0 bg-black/80 z-50 flex items-center justify-center hidden">
        <div class="bg-gray-900 border border-gray-700 rounded-lg p-4 max-w-lg w-full mx-4 max-h-[90vh] overflow-y-auto">
            <div class="flex justify-between items-center mb-4">
                <h3 class="text-lg font-bold text-white">üë• People in Your Life</h3>
                <button onclick="closeRelationshipsModal()" class="text-gray-400 hover:text-white text-xl">&times;</button>
            </div>
            <div id="relationshipsList" class="space-y-3"></div>
            <div class="mt-4">
                <button onclick="closeRelationshipsModal()" class="w-full bg-gray-700 hover:bg-gray-600 text-white py-2 px-4 rounded transition-colors">
                    Close
                </button>
            </div>
        </div>
    </div>

    <!-- Fishing Mini-Game Modal -->
    <div id="fishingModal" class="fixed inset-0 bg-black/80 z-50 flex items-center justify-center hidden">
        <div class="bg-gradient-to-b from-blue-900 to-blue-950 border border-blue-500 rounded-lg p-6 max-w-md w-full mx-4 text-center">
            <div class="text-4xl mb-2" id="fishingIcon">üé£</div>
            <h3 class="text-xl font-bold text-white mb-2" id="fishingTitle">Gone Fishing</h3>
            <div id="fishingContent" class="text-gray-300 mb-4"></div>
            <div id="fishingWater" class="text-6xl my-4 transition-all">üåä</div>
            <div id="fishingActions" class="space-y-2"></div>
        </div>
    </div>

    <!-- Habits Modal -->
    <div id="habitsModal" class="fixed inset-0 bg-black/80 z-50 flex items-center justify-center hidden">
        <div class="bg-gray-900 border border-gray-700 rounded-lg p-4 max-w-xl w-full mx-4 max-h-[90vh] overflow-y-auto">
            <div class="flex justify-between items-center mb-4">
                <h3 class="text-lg font-bold text-white">üß† Manage Habits</h3>
                <button onclick="closeHabitsModal()" class="text-gray-400 hover:text-white text-xl">&times;</button>
            </div>
            
            <!-- Willpower Bar -->
            <div class="bg-gray-800 rounded-lg p-3 mb-4">
                <div class="flex justify-between text-sm mb-2">
                    <span class="text-gray-400">Willpower Budget</span>
                    <span id="habitsWillpowerText" class="text-purple-400">50/50</span>
                </div>
                <div class="w-full h-3 bg-gray-700 rounded-full overflow-hidden">
                    <div id="habitsWillpowerBar" class="h-full bg-purple-500 rounded-full transition-all" style="width: 100%"></div>
                </div>
                <div class="text-xs text-gray-500 mt-2" id="willpowerFactors"></div>
            </div>
            
            <div class="text-xs text-gray-400 mb-3">
                <span class="text-green-400">Good habits</span> cost willpower but improve your life. 
                <span class="text-red-400">Bad habits</span> give willpower back but have downsides.
                <br><span class="text-purple-400">Habits maintained longer cost less willpower!</span>
            </div>
            
            <div class="mb-3">
                <div class="text-sm font-bold text-green-400 mb-2">‚ú® Good Habits</div>
                <div id="goodHabitsList" class="space-y-2"></div>
            </div>
            
            <div class="mb-3">
                <div class="text-sm font-bold text-red-400 mb-2">‚ö†Ô∏è Bad Habits</div>
                <div id="badHabitsList" class="space-y-2"></div>
            </div>
            
            <div class="mt-4 flex gap-2">
                <button onclick="closeHabitsModal()" class="flex-1 bg-purple-600 hover:bg-purple-500 text-white py-2 px-4 rounded transition-colors">
                    Done
                </button>
            </div>
        </div>
    </div>

    <!-- Subscriptions Modal -->
    <div id="subscriptionsModal" class="fixed inset-0 bg-black/80 z-50 flex items-center justify-center hidden">
        <div class="bg-gray-900 border border-gray-700 rounded-lg p-4 max-w-lg w-full mx-4 max-h-[90vh] overflow-y-auto">
            <div class="flex justify-between items-center mb-4">
                <h3 class="text-lg font-bold text-white">üì± Manage Subscriptions</h3>
                <button onclick="closeSubscriptionsModal()" class="text-gray-400 hover:text-white text-xl">&times;</button>
            </div>
            <div class="text-sm text-gray-400 mb-4">
                Total: <span id="subsModalCost" class="text-yellow-400 font-bold">$0</span>/week
            </div>
            <div id="subscriptionsList" class="space-y-2"></div>
            <div class="mt-4 flex gap-2">
                <button onclick="closeSubscriptionsModal()" class="flex-1 bg-cyan-600 hover:bg-cyan-500 text-white py-2 px-4 rounded transition-colors">
                    Done
                </button>
            </div>
        </div>
    </div>

    <!-- Free Time Modal -->
    <div id="freeTimeModal" class="fixed inset-0 bg-black/80 z-50 flex items-center justify-center hidden">
        <div class="bg-gray-900 border border-gray-700 rounded-lg p-4 max-w-lg w-full mx-4 max-h-[90vh] overflow-y-auto">
            <div class="flex justify-between items-center mb-4">
                <h3 class="text-lg font-bold text-white">‚è∞ Manage Weekly Schedule</h3>
                <button onclick="closeFreeTimeModal()" class="text-gray-400 hover:text-white text-xl">&times;</button>
            </div>
            <div class="text-sm text-gray-400 mb-4">
                Allocate your <span class="text-cyan-400 font-bold">20 hours</span> of free time per week.
                <br><span class="text-gray-500">Remaining: <span id="freeTimeRemaining" class="text-cyan-400">20</span> hrs | Cost: <span id="freeTimeModalCost" class="text-yellow-400">$0</span>/week</span>
            </div>
            <div id="freeTimeActivities" class="space-y-3"></div>
            <div class="mt-4 pt-4 border-t border-gray-700">
                <div class="text-xs text-gray-500 mb-2">Weekly Effects Preview:</div>
                <div id="freeTimeEffectsPreview" class="text-xs text-gray-400 grid grid-cols-2 gap-1"></div>
            </div>
            <div class="mt-4 flex gap-2">
                <button onclick="saveFreeTimeAllocation()" class="flex-1 bg-cyan-600 hover:bg-cyan-500 text-white py-2 px-4 rounded transition-colors">
                    Save Schedule
                </button>
                <button onclick="closeFreeTimeModal()" class="flex-1 bg-gray-700 hover:bg-gray-600 text-white py-2 px-4 rounded transition-colors">
                    Cancel
                </button>
            </div>
        </div>
    </div>

    <div class="h-screen flex flex-col max-w-5xl mx-auto relative z-10">

        <!-- Top Stats Bar -->
        <div class="p-3 flex justify-between items-center border-b border-gray-800/50">
            <div class="flex gap-4">
                <div class="flex items-center gap-1 cursor-pointer hover:opacity-80" title="Click for details" onclick="openStatsModal('health')">
                    <div class="stat-icon bg-red-900/50 text-red-400">‚ô•</div>
                    <div class="w-14 h-1.5 bg-gray-800 rounded-full overflow-hidden">
                        <div id="healthBar" class="stat-fill h-full bg-red-500 rounded-full" style="width: 100%"></div>
                    </div>
                    <span class="text-xs text-gray-500" id="healthVal">100</span>
                </div>
                <div class="flex items-center gap-1 cursor-pointer hover:opacity-80" title="Click for details" onclick="openStatsModal('energy')">
                    <div class="stat-icon bg-yellow-900/50 text-yellow-400">‚ö°</div>
                    <div class="w-14 h-1.5 bg-gray-800 rounded-full overflow-hidden">
                        <div id="energyBar" class="stat-fill h-full bg-yellow-500 rounded-full" style="width: 100%"></div>
                    </div>
                    <span class="text-xs text-gray-500" id="energyVal">100</span>
                </div>
                <div class="flex items-center gap-1 cursor-pointer hover:opacity-80" title="Click for details" onclick="openStatsModal('happiness')">
                    <div class="stat-icon bg-blue-900/50 text-blue-400">‚ò∫</div>
                    <div class="w-14 h-1.5 bg-gray-800 rounded-full overflow-hidden">
                        <div id="happyBar" class="stat-fill h-full bg-blue-500 rounded-full" style="width: 75%"></div>
                    </div>
                    <span class="text-xs text-gray-500" id="happyVal">75</span>
                </div>
                <div class="flex items-center gap-1 cursor-pointer hover:opacity-80" title="Click for details" onclick="openStatsModal('stress')">
                    <div class="stat-icon bg-purple-900/50 text-purple-400">üò∞</div>
                    <div class="w-14 h-1.5 bg-gray-800 rounded-full overflow-hidden">
                        <div id="stressBar" class="stat-fill h-full bg-purple-500 rounded-full" style="width: 20%"></div>
                    </div>
                    <span class="text-xs text-gray-500" id="stressVal">20</span>
                </div>
            </div>
            
            <div class="text-center">
                <div class="text-lg font-bold text-white">
                    <span id="ageDisplay">18</span> yrs, <span id="monthDisplay">1</span> mo
                </div>
                <div id="phaseBadge" class="phase-badge bg-purple-900/50 text-purple-300">Deciding Future</div>
            </div>

            <div class="text-right flex items-center gap-3">
                <div>
                <div class="text-lg font-bold text-green-400" id="moneyDisplay">$1,200</div>
                <div class="text-[10px] text-gray-500">Savings</div>
                <div class="text-[10px] text-red-400 hidden" id="debtDisplay"></div>
                </div>
                <button onclick="toggleMusic()" id="musicToggle" class="p-2 rounded-lg bg-gray-800 hover:bg-gray-700 text-gray-400 hover:text-white transition-colors opacity-50" title="Toggle Music">
                    üéµ
                </button>
                <button onclick="toggleSound()" id="soundToggle" class="p-2 rounded-lg bg-gray-800 hover:bg-gray-700 text-gray-400 hover:text-white transition-colors" title="Toggle Sound Effects">
                    üîä
                </button>
                <button onclick="openGameMenu()" class="p-2 rounded-lg bg-gray-800 hover:bg-gray-700 text-gray-400 hover:text-white transition-colors" title="Game Menu">
                    ‚öôÔ∏è
                </button>
            </div>
        </div>

        <!-- Phase Progress Bar -->
        <div class="px-4 py-2 border-b border-gray-800/30">
            <div class="flex items-center gap-2">
                <span class="text-[10px] text-gray-500 w-24" id="phaseLabel">Week 1</span>
                <div class="flex-grow h-1 bg-gray-800 rounded-full overflow-hidden">
                    <div id="phaseProgress" class="h-full bg-purple-500 rounded-full transition-all" style="width: 0%"></div>
                </div>
                <span class="text-[10px] text-gray-500" id="phaseTarget"></span>
            </div>
        </div>

        <!-- Main Content Area -->
        <div class="flex-grow flex gap-4 p-4 overflow-hidden">
            
            <!-- Left Panel: Status -->
            <div class="w-56 flex flex-col gap-2 overflow-y-auto">
                <div class="possession-card p-2 rounded cursor-pointer hover:bg-gray-700/50 transition-colors" id="statusCard" onclick="openEducationModal()" title="Click for details">
                    <div class="text-[10px] text-gray-500 uppercase flex justify-between items-center">
                        <span>Current Status</span>
                        <span class="text-cyan-400" id="statusViewIcon">üëÅÔ∏è</span>
                    </div>
                    <div class="flex items-center gap-2 mt-1">
                        <span class="text-xl" id="statusIcon">üéì</span>
                        <div>
                            <div class="text-sm text-white" id="statusTitle">High School Senior</div>
                            <div class="text-[10px] text-gray-500" id="statusDesc">Graduation approaching</div>
                        </div>
                    </div>
                    <div id="gpaDisplay" class="text-[10px] mt-1 hidden">
                        <div class="flex justify-between">
                            <span class="text-gray-500">GPA:</span>
                            <span id="gpaValue" class="text-cyan-400">3.00</span>
                        </div>
                        <div class="h-1 bg-gray-800 rounded-full mt-0.5">
                            <div id="gpaBar" class="h-full bg-cyan-500 rounded-full" style="width: 75%"></div>
                        </div>
                    </div>
                </div>

                <div class="possession-card p-2 rounded" id="traitsCard" style="display:none;">
                    <div class="text-[10px] text-gray-500 uppercase mb-1">Character Traits</div>
                    <div class="text-[10px] space-y-1.5">
                        <!-- Height/Build (gender-dependent) -->
                        <div>
                            <div class="flex justify-between mb-0.5">
                                <span id="traitPhysicalLabel" class="text-gray-400">üìè Height</span>
                                <span id="traitPhysical" class="text-gray-300">-</span>
                            </div>
                            <div class="h-1.5 bg-gray-800 rounded-full overflow-hidden">
                                <div id="traitPhysicalBar" class="h-full bg-gray-400 rounded-full transition-all" style="width: 50%"></div>
                            </div>
                        </div>
                        <!-- Family Wealth -->
                        <div>
                            <div class="flex justify-between mb-0.5">
                                <span class="text-gray-400">üí∞ Family</span>
                                <span id="traitWealth" class="text-yellow-400">-</span>
                            </div>
                            <div class="h-1.5 bg-gray-800 rounded-full overflow-hidden">
                                <div id="traitWealthBar" class="h-full bg-yellow-500 rounded-full transition-all" style="width: 50%"></div>
                            </div>
                        </div>
                        <!-- Intelligence -->
                        <div>
                            <div class="flex justify-between mb-0.5">
                                <span class="text-gray-400">üß† Intelligence</span>
                                <span id="traitIntel" class="text-blue-400">-</span>
                            </div>
                            <div class="h-1.5 bg-gray-800 rounded-full overflow-hidden">
                                <div id="traitIntelBar" class="h-full bg-blue-500 rounded-full transition-all" style="width: 50%"></div>
                            </div>
                        </div>
                        <!-- Attractiveness -->
                        <div>
                            <div class="flex justify-between mb-0.5">
                                <span class="text-gray-400">‚ú® Looks</span>
                                <span id="traitAttr" class="text-pink-400">-</span>
                            </div>
                            <div class="h-1.5 bg-gray-800 rounded-full overflow-hidden">
                                <div id="traitAttrBar" class="h-full bg-pink-500 rounded-full transition-all" style="width: 50%"></div>
                            </div>
                        </div>
                        <!-- Self-Control -->
                        <div>
                            <div class="flex justify-between mb-0.5">
                                <span class="text-gray-400">üí™ Self-Control</span>
                                <span id="traitSelfControl" class="text-purple-400">-</span>
                            </div>
                            <div class="h-1.5 bg-gray-800 rounded-full overflow-hidden">
                                <div id="traitSelfControlBar" class="h-full bg-purple-500 rounded-full transition-all" style="width: 50%"></div>
                            </div>
                        </div>
                        <!-- Dating Appeal -->
                        <div class="border-t border-gray-700 pt-1.5 mt-1">
                            <div class="flex justify-between mb-0.5">
                                <span class="text-gray-400">üíï Dating Appeal</span>
                                <span id="datingAppeal" class="text-pink-400">-</span>
                            </div>
                            <div class="h-1.5 bg-gray-800 rounded-full overflow-hidden">
                                <div id="datingAppealBar" class="h-full bg-gradient-to-r from-pink-500 to-red-500 rounded-full transition-all" style="width: 50%"></div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="possession-card p-2 rounded" id="fitnessCard">
                    <div class="text-[10px] text-gray-500 uppercase">Fitness & Health</div>
                    <div class="text-[10px] space-y-1 mt-1">
                        <div class="flex justify-between items-center">
                            <span class="text-gray-400">Fitness:</span>
                            <span id="fitnessLevel" class="text-cyan-400">Average</span>
                        </div>
                        <div class="h-1.5 bg-gray-800 rounded-full overflow-hidden">
                            <div id="fitnessBar" class="h-full bg-green-500 rounded-full transition-all" style="width: 50%"></div>
                        </div>
                        <div class="flex justify-between text-[9px]">
                            <span id="fitnessGym" class="text-gray-500">No gym</span>
                            <span id="fitnessEating" class="text-gray-500">Normal diet</span>
                        </div>
                        <div id="fitnessStreak" class="text-[9px] text-gray-500"></div>
                        <div id="fitnessWarning" class="text-[9px] text-orange-400 hidden"></div>
                    </div>
                </div>

                <div class="possession-card p-2 rounded cursor-pointer hover:bg-gray-700/50 transition-colors" onclick="openFreeTimeModal()" title="Click to manage">
                    <div class="text-[10px] text-gray-500 uppercase flex justify-between items-center">
                        <span>‚è∞ Weekly Schedule</span>
                        <span class="text-cyan-400">‚öôÔ∏è</span>
                    </div>
                    <div class="text-[10px] space-y-0.5 mt-1">
                        <div class="flex justify-between">
                            <span class="text-gray-500">Free Time:</span>
                            <span id="freeTimeUsed" class="text-cyan-400">0/20 hrs</span>
                        </div>
                        <div class="flex justify-between">
                            <span class="text-gray-500">Weekly Cost:</span>
                            <span id="freeTimeCost" class="text-yellow-400">$0</span>
                        </div>
                        <div id="freeTimeSummary" class="text-[9px] text-gray-500 mt-1"></div>
                    </div>
                </div>

                <div class="possession-card p-2 rounded cursor-pointer hover:bg-gray-700/50 transition-colors" onclick="openHousingModal()" title="Click to change">
                    <div class="text-[10px] text-gray-500 uppercase flex justify-between items-center">
                        <span>Living Situation</span>
                        <span class="text-cyan-400">‚öôÔ∏è</span>
                    </div>
                    <div class="flex items-center gap-2 mt-1">
                        <span class="text-xl" id="homeIcon">üè†</span>
                        <div>
                            <div class="text-sm text-white" id="homeName">Parents' House</div>
                            <div class="text-[10px] text-gray-500" id="homeDesc">Free rent</div>
                        </div>
                    </div>
                </div>

                <div class="possession-card p-2 rounded cursor-pointer hover:bg-gray-700/50 transition-colors" onclick="openTransportModal()" title="Click to change">
                    <div class="text-[10px] text-gray-500 uppercase flex justify-between items-center">
                        <span>Transportation</span>
                        <span class="text-cyan-400">‚öôÔ∏è</span>
                    </div>
                    <div class="flex items-center gap-2 mt-1">
                        <span class="text-xl" id="carIcon">üöå</span>
                        <div>
                            <div class="text-sm text-white" id="carName">Bus Pass</div>
                            <div class="text-[10px] text-gray-500" id="carDesc">$20/week</div>
                        </div>
                    </div>
                </div>

                <div class="possession-card p-2 rounded cursor-pointer hover:bg-gray-700/50 transition-colors" onclick="openSubscriptionsModal()" title="Click to manage">
                    <div class="text-[10px] text-gray-500 uppercase flex justify-between items-center">
                        <span>üì± Subscriptions</span>
                        <span class="text-cyan-400">‚öôÔ∏è</span>
                    </div>
                    <div class="text-[10px] space-y-0.5 mt-1">
                        <div class="flex justify-between">
                            <span class="text-gray-500">Active:</span>
                            <span id="subsCount" class="text-cyan-400">0</span>
                        </div>
                        <div class="flex justify-between">
                            <span class="text-gray-500">Cost:</span>
                            <span id="subsCost" class="text-yellow-400">$0/week</span>
                        </div>
                        <div id="subsSummary" class="text-[9px] text-gray-500 mt-1"></div>
                    </div>
                </div>

                <div class="possession-card p-2 rounded cursor-pointer hover:bg-gray-700/50 transition-colors" onclick="openHobbiesModal()" title="Click to manage">
                    <div class="text-[10px] text-gray-500 uppercase flex justify-between items-center">
                        <span>üé® Hobbies</span>
                        <span class="text-purple-400">‚öôÔ∏è</span>
                    </div>
                    <div class="text-[10px] space-y-0.5 mt-1">
                        <div class="flex justify-between">
                            <span class="text-gray-500">Active:</span>
                            <span id="hobbiesCount" class="text-purple-400">0/3</span>
                        </div>
                        <div class="flex justify-between">
                            <span class="text-gray-500">Top Skill:</span>
                            <span id="topHobbySkill" class="text-cyan-400">-</span>
                        </div>
                        <div id="hobbiesSummary" class="text-[9px] text-gray-500 mt-1">Click to pick hobbies</div>
                    </div>
                </div>

                <div class="possession-card p-2 rounded cursor-pointer hover:bg-gray-700/50 transition-colors" onclick="openHabitsModal()" title="Click to manage">
                    <div class="text-[10px] text-gray-500 uppercase flex justify-between items-center">
                        <span>üß† Habits</span>
                        <span class="text-cyan-400">‚öôÔ∏è</span>
                    </div>
                    <div class="text-[10px] space-y-0.5 mt-1">
                        <div class="flex justify-between">
                            <span class="text-gray-500">Willpower:</span>
                            <span id="willpowerDisplay" class="text-purple-400">50/50</span>
                        </div>
                        <div class="flex justify-between">
                            <span class="text-gray-500">Habit Cost:</span>
                            <span id="habitCostDisplay" class="text-cyan-400">0</span>
                        </div>
                        <div id="habitsSummary" class="text-[9px] text-gray-500 mt-1"></div>
                    </div>
                </div>

                <div class="possession-card p-2 rounded cursor-pointer hover:bg-gray-700/50 transition-colors" id="jobCard" style="display:none;" onclick="openEmploymentModal()" title="Click for job options">
                    <div class="text-[10px] text-gray-500 uppercase flex justify-between items-center">
                        <span>Employment</span>
                        <span class="text-cyan-400">üëÅÔ∏è</span>
                    </div>
                    <div class="flex items-center gap-2 mt-1">
                        <span class="text-xl" id="jobIcon">üíº</span>
                        <div>
                            <div class="text-sm text-white" id="jobName">--</div>
                            <div class="text-[10px] text-green-400" id="jobPay">--</div>
                        </div>
                    </div>
                    <div class="mt-1">
                        <div class="flex justify-between text-[10px]">
                            <span class="text-gray-500">Performance</span>
                            <span id="jobPerfVal" class="text-yellow-400">50%</span>
                        </div>
                        <div class="h-1 bg-gray-800 rounded-full mt-0.5">
                            <div id="jobPerfBar" class="h-full bg-yellow-500 rounded-full" style="width: 50%"></div>
                        </div>
                    </div>
                    <div class="mt-1 text-[10px]">
                        <div class="flex justify-between">
                            <span class="text-gray-500">Boss:</span>
                            <span id="bossStatus" class="text-gray-400">--</span>
                        </div>
                    </div>
                </div>

                <div class="possession-card p-2 rounded cursor-pointer hover:bg-gray-700/50 transition-colors" id="businessCard" style="display:none;" onclick="openBusinessModal()" title="Manage your business">
                    <div class="text-[10px] text-gray-500 uppercase flex justify-between items-center">
                        <span>Your Business</span>
                        <span class="text-green-400">üëÅÔ∏è</span>
                    </div>
                    <div class="flex items-center gap-2 mt-1">
                        <span class="text-xl" id="bizIcon">üè¢</span>
                        <div>
                            <div class="text-sm text-white" id="bizName">--</div>
                            <div class="text-[10px]" id="bizProfit">--</div>
                        </div>
                    </div>
                    <div class="mt-1">
                        <div class="flex justify-between text-[10px]">
                            <span class="text-gray-500">Reputation</span>
                            <span id="bizRepVal" class="text-yellow-400">50%</span>
                        </div>
                        <div class="h-1 bg-gray-800 rounded-full mt-0.5">
                            <div id="bizRepBar" class="h-full bg-yellow-500 rounded-full" style="width: 50%"></div>
                        </div>
                    </div>
                </div>

                <div class="possession-card p-2 rounded cursor-pointer hover:bg-gray-700/50 transition-colors" id="partnerCard" onclick="openRelationshipModal()" title="View relationship details">
                    <div class="text-[10px] text-gray-500 uppercase flex justify-between">
                        <span>Relationship</span>
                        <span class="text-pink-400">üëÅÔ∏è</span>
                    </div>
                    <div class="flex items-center gap-2 mt-1" id="partnerContent">
                        <span class="text-xl">üíï</span>
                        <div class="flex-grow">
                            <div class="text-sm text-white" id="partnerName">--</div>
                            <div class="text-[10px] text-gray-500" id="partnerStatus">Dating</div>
                        </div>
                    </div>
                    <div class="mt-1">
                        <div class="flex justify-between text-[10px]">
                            <span class="text-gray-500">Bond</span>
                            <span id="partnerBondVal" class="text-pink-400">50%</span>
                        </div>
                        <div class="h-1 bg-gray-800 rounded-full mt-0.5">
                            <div id="partnerBondBar" class="h-full bg-pink-500 rounded-full" style="width: 50%"></div>
                        </div>
                    </div>
                </div>

                <div class="possession-card p-2 rounded cursor-pointer hover:bg-gray-700/50 transition-colors" onclick="openRelationshipsModal()" title="View all relationships">
                    <div class="text-[10px] text-gray-500 uppercase flex justify-between items-center">
                        <span>üë• People in Your Life</span>
                        <span class="text-cyan-400">üëÅÔ∏è</span>
                    </div>
                    <div id="relationshipsSummary" class="text-[10px] space-y-0.5 mt-1">
                        <div class="text-gray-500">No close relationships yet</div>
                    </div>
                </div>

                <div class="possession-card p-2 rounded">
                    <div class="text-[10px] text-gray-500 uppercase">Your Skills</div>
                    <div class="mt-1 space-y-1">
                        <div class="flex items-center gap-1">
                            <span class="text-[10px] w-12 text-gray-500">Tech</span>
                            <div class="flex-grow h-1.5 bg-gray-800 rounded-full overflow-hidden">
                                <div id="techBar" class="h-full bg-blue-500 rounded-full transition-all" style="width: 10%"></div>
                            </div>
                            <span class="text-[10px] text-gray-500 w-6" id="techVal">10</span>
                        </div>
                        <div class="flex items-center gap-1">
                            <span class="text-[10px] w-12 text-gray-500">Social</span>
                            <div class="flex-grow h-1.5 bg-gray-800 rounded-full overflow-hidden">
                                <div id="socialBar" class="h-full bg-purple-500 rounded-full transition-all" style="width: 30%"></div>
                            </div>
                            <span class="text-[10px] text-gray-500 w-6" id="socialVal">30</span>
                        </div>
                        <div class="flex items-center gap-1">
                            <span class="text-[10px] w-12 text-gray-500">Physical</span>
                            <div class="flex-grow h-1.5 bg-gray-800 rounded-full overflow-hidden">
                                <div id="physicalBar" class="h-full bg-green-500 rounded-full transition-all" style="width: 40%"></div>
                            </div>
                            <span class="text-[10px] text-gray-500 w-6" id="physicalVal">40</span>
                        </div>
                        <div class="flex items-center gap-1">
                            <span class="text-[10px] w-12 text-gray-500">Creative</span>
                            <div class="flex-grow h-1.5 bg-gray-800 rounded-full overflow-hidden">
                                <div id="creativeBar" class="h-full bg-orange-500 rounded-full transition-all" style="width: 20%"></div>
                            </div>
                            <span class="text-[10px] text-gray-500 w-6" id="creativeVal">20</span>
                        </div>
                    </div>
                </div>

                <div class="possession-card p-2 rounded">
                    <div class="text-[10px] text-gray-500 uppercase">Education & Traits</div>
                    <div id="skillsList" class="text-[10px] text-gray-400 mt-1">
                        High School Diploma (in progress)
                    </div>
                </div>

                <div class="possession-card p-2 rounded" id="networkCard">
                    <div class="text-[10px] text-gray-500 uppercase">Network & Connections</div>
                    <div class="text-[10px] space-y-0.5 mt-1">
                        <div class="flex justify-between"><span class="text-gray-500">Contacts:</span><span id="networkContacts" class="text-cyan-400">0</span></div>
                        <div class="flex justify-between"><span class="text-gray-500">Credit Score:</span><span id="creditScoreDisplay" class="text-yellow-400">650</span></div>
                    </div>
                </div>

                <div class="possession-card p-2 rounded cursor-pointer hover:bg-gray-700/50 transition-colors" onclick="openCreditModal()" title="Manage finances & credit">
                    <div class="text-[10px] text-gray-500 uppercase flex justify-between">
                        <span>Monthly Budget</span>
                        <span class="text-green-400">üí≥</span>
                    </div>
                    <div class="text-[10px] space-y-0.5 mt-1">
                        <div class="flex justify-between"><span class="text-gray-500">Income:</span><span id="monthlyIncome" class="text-green-400">$0</span></div>
                        <div class="flex justify-between"><span class="text-gray-500">Expenses:</span><span id="monthlyExpenses" class="text-red-400">$0</span></div>
                        <div class="flex justify-between border-t border-gray-700 pt-0.5"><span class="text-gray-400">Net:</span><span id="monthlyNet" class="text-white">$0</span></div>
                        <div id="debtWarning" class="text-red-400 text-center mt-1 hidden">‚ö†Ô∏è In Debt</div>
                    </div>
                </div>

                <div class="possession-card p-2 rounded" id="creditCardCard" style="display: none;">
                    <div class="text-[10px] text-gray-500 uppercase">üí≥ Credit Card</div>
                    <div class="text-[10px] space-y-0.5 mt-1">
                        <div class="flex justify-between"><span class="text-gray-500">Balance:</span><span id="creditBalance" class="text-red-400">$0</span></div>
                        <div class="flex justify-between"><span class="text-gray-500">Limit:</span><span id="creditLimit" class="text-gray-400">$0</span></div>
                        <div class="flex justify-between"><span class="text-gray-500">APR:</span><span id="creditAPR" class="text-yellow-400">0%</span></div>
                        <div class="flex justify-between"><span class="text-gray-500">Available:</span><span id="creditAvailable" class="text-green-400">$0</span></div>
                    </div>
                </div>
            </div>

            <!-- Center: Event Card -->
            <div class="flex-grow flex items-center justify-center relative">
                
                <div id="diceDisplay" class="hidden absolute inset-0 flex items-center justify-center z-30">
                    <div class="dice-container text-center">
                        <div id="diceRoller" class="dice-roller">
                            <div class="dice">üé≤</div>
                        </div>
                        <div id="diceResult" class="dice-result hidden">
                            <span id="diceValue" class="text-5xl font-bold text-white">20</span>
                            <div id="diceLabel" class="text-sm text-gray-400 mt-1">Rolling...</div>
                        </div>
                    </div>
                </div>
                
                <div id="outcomeDisplay" class="hidden absolute inset-0 flex items-center justify-center z-20">
                    <div class="outcome-flash bg-gray-900/95 border border-gray-700 rounded-xl p-6 text-center max-w-sm">
                        <div id="outcomeIcon" class="text-4xl mb-3">‚ö°</div>
                        <p id="outcomeText" class="text-base text-gray-300"></p>
                        <div id="outcomeStats" class="mt-3 text-sm text-gray-500"></div>
                    </div>
                </div>

                <div id="eventCard" class="event-card rounded-2xl p-5 w-full max-w-md">
                    <div class="flex justify-between items-start mb-2">
                        <div class="text-[10px] uppercase tracking-wider text-gray-500" id="eventCategory">Life Event</div>
                        <div class="text-[10px] text-gray-600" id="eventDate">Week 1, Year 1</div>
                    </div>
                    <h2 class="text-xl font-semibold text-white mb-3" id="eventTitle">The Journey Begins</h2>
                    <p class="text-gray-400 leading-relaxed mb-4 text-sm" id="eventDesc">
                        You're 18, about to graduate high school. The future stretches before you.
                    </p>
                    <div id="choicesContainer" class="space-y-2"></div>
                </div>
            </div>

            <!-- Right Panel: Log -->
            <div class="w-48 flex flex-col">
                <div class="text-[10px] uppercase text-gray-500 mb-2">Life Log</div>
                <div id="eventLog" class="flex-grow overflow-y-auto space-y-1 text-[10px] text-gray-500">
                    <div class="border-l-2 border-gray-700 pl-2">Age 18: Senior year begins...</div>
                </div>
            </div>
        </div>
    </div>

    <!-- Game Over Screen -->
    <div id="gameOverScreen" class="hidden fixed inset-0 bg-black/95 z-50 flex items-center justify-center p-8 overflow-y-auto">
        <div class="text-center max-w-2xl my-8">
            <div class="text-6xl mb-4" id="endIcon">üåÖ</div>
            <h1 class="text-4xl font-bold text-white mb-2" id="endTitle">The End</h1>
            <p class="text-gray-400 mb-6" id="endDesc">Your journey has concluded.</p>
            
            <!-- Life Tier Banner -->
            <div id="lifeTierBanner" class="mb-6 py-4 px-6 rounded-xl border-2">
                <div class="text-sm uppercase tracking-widest mb-1 opacity-75" id="lifeTierLabel">Life Assessment</div>
                <div class="text-3xl font-bold" id="lifeTierTitle">--</div>
                <div class="text-sm mt-1 opacity-75" id="lifeTierSubtitle">--</div>
            </div>
            
            <!-- Obituary -->
            <div class="bg-gray-900/50 rounded-xl p-6 mb-6 text-left">
                <div class="text-center mb-4">
                    <div class="text-lg font-serif italic text-gray-300" id="obituaryHeader">In Memoriam</div>
                </div>
                <p id="obituaryText" class="text-gray-300 leading-relaxed text-center font-serif">--</p>
            </div>
            
            <!-- Stats Summary -->
            <div class="bg-gray-900/50 rounded-xl p-6 mb-6 text-left space-y-2">
                <div class="text-xs uppercase text-gray-500 mb-3">Final Statistics</div>
                <div class="grid grid-cols-2 gap-4">
                    <div class="flex justify-between"><span class="text-gray-500">Age:</span><span id="finalAge" class="text-white">--</span></div>
                    <div class="flex justify-between"><span class="text-gray-500">Career:</span><span id="finalCareer" class="text-yellow-400">--</span></div>
                <div class="flex justify-between"><span class="text-gray-500">Net Worth:</span><span id="finalWealth" class="text-green-400">--</span></div>
                <div class="flex justify-between"><span class="text-gray-500">Family:</span><span id="finalFamily" class="text-purple-400">--</span></div>
                </div>
                <hr class="border-gray-800 my-3">
                <div class="text-xs uppercase text-gray-500 mb-2">Legacy & Achievements</div>
                <p id="finalEpitaph" class="text-gray-300 text-sm">--</p>
            </div>
            
            <button onclick="location.reload()" class="px-8 py-3 bg-white/10 hover:bg-white/20 rounded-lg transition">
                Live Again
            </button>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>